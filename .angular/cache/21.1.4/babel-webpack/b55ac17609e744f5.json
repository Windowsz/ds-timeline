{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport let NgxTimelineCalendarService = /*#__PURE__*/(() => {\n  class NgxTimelineCalendarService {\n    buildTimeline(view, date, slotDuration, slotMinWidth) {\n      switch (view) {\n        case 'resourceTimelineDay':\n          return this.buildDay(date, slotDuration, slotMinWidth);\n        case 'resourceTimelineMonth':\n          return this.buildMonth(date, slotMinWidth);\n        default:\n          return this.buildWeek(date, slotMinWidth);\n      }\n    }\n    buildDay(date, slotDuration, slotMinWidth) {\n      const start = this.startOfDay(date);\n      const slots = [];\n      const slotMs = this.slotMs(slotDuration);\n      const count = Math.floor(24 * 3600000 / slotMs);\n      const slotWidth = Math.max(slotMinWidth, 56);\n      for (let i = 0; i < count; i++) slots.push(new Date(start.getTime() + i * slotMs));\n      const tier1 = [{\n        label: date.toLocaleDateString('en-US', {\n          weekday: 'long',\n          month: 'long',\n          day: 'numeric',\n          year: 'numeric'\n        }),\n        width: slots.length * slotWidth\n      }];\n      return {\n        slots,\n        tier1,\n        slotWidth,\n        totalWidth: slots.length * slotWidth,\n        title: tier1[0].label\n      };\n    }\n    buildWeek(date, slotMinWidth) {\n      const ws = this.startOfWeek(date);\n      const slots = [];\n      const slotWidth = Math.max(slotMinWidth, 80);\n      for (let d = 0; d < 7; d++) slots.push(new Date(ws.getTime() + d * 86400000));\n      const we = new Date(ws.getTime() + 6 * 86400000);\n      const tier1 = [{\n        label: ws.toLocaleDateString('en-US', {\n          month: 'long',\n          year: 'numeric'\n        }),\n        width: 7 * slotWidth\n      }];\n      return {\n        slots,\n        tier1,\n        slotWidth,\n        totalWidth: slots.length * slotWidth,\n        title: this.shortDate(ws) + ' \\u2013 ' + this.shortDate(we)\n      };\n    }\n    buildMonth(date, slotMinWidth) {\n      const ms = this.startOfMonth(date);\n      const me = this.endOfMonth(date);\n      const slots = [];\n      const slotWidth = Math.max(slotMinWidth, 36);\n      const cur = new Date(ms);\n      while (cur <= me) {\n        slots.push(new Date(cur));\n        cur.setDate(cur.getDate() + 1);\n      }\n      const label = date.toLocaleDateString('en-US', {\n        month: 'long',\n        year: 'numeric'\n      });\n      return {\n        slots,\n        tier1: [{\n          label,\n          width: slots.length * slotWidth\n        }],\n        slotWidth,\n        totalWidth: slots.length * slotWidth,\n        title: label\n      };\n    }\n    getViewStart(view, date) {\n      if (view === 'resourceTimelineDay') return this.startOfDay(date);\n      if (view === 'resourceTimelineMonth') return this.startOfMonth(date);\n      return this.startOfWeek(date);\n    }\n    getViewEnd(view, date) {\n      if (view === 'resourceTimelineDay') return new Date(this.startOfDay(date).getTime() + 86400000); // exact midnight = no scrollbar overflow\n      if (view === 'resourceTimelineMonth') {\n        const e = this.endOfMonth(date);\n        e.setDate(e.getDate() + 1);\n        return e;\n      }\n      return new Date(this.startOfWeek(date).getTime() + 7 * 86400000);\n    }\n    formatSlotLabel(date, view, slotDuration, timeFormat = '12h') {\n      if (view === 'resourceTimelineDay') {\n        if (timeFormat === '24h') {\n          const h = date.getHours();\n          const m = date.getMinutes();\n          return (h < 10 ? '0' + h : '' + h) + ':' + (m < 10 ? '0' + m : '' + m);\n        }\n        const h = date.getHours() % 12 || 12;\n        const m = date.getMinutes();\n        const p = date.getHours() >= 12 ? 'PM' : 'AM';\n        return h + (m ? ':' + (m < 10 ? '0' + m : m) : '') + ' ' + p;\n      }\n      if (view === 'resourceTimelineWeek') {\n        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n        return days[date.getDay()] + ' ' + date.getDate();\n      }\n      return '' + date.getDate();\n    }\n    isWeekend(date) {\n      const d = date.getDay();\n      return d === 0 || d === 6;\n    }\n    isSameDay(a, b) {\n      return a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth() && a.getDate() === b.getDate();\n    }\n    isToday(date, view) {\n      const now = new Date();\n      if (view === 'resourceTimelineDay') return date.getHours() === now.getHours() && this.isSameDay(date, now);\n      return this.isSameDay(date, now);\n    }\n    getContrastColor(hex) {\n      try {\n        const c = (hex || '#3d91ff').replace('#', '');\n        if (c.length < 6) return '#ffffff';\n        const r = parseInt(c.substring(0, 2), 16);\n        const g = parseInt(c.substring(2, 4), 16);\n        const b = parseInt(c.substring(4, 6), 16);\n        return (0.299 * r + 0.587 * g + 0.114 * b) / 255 > 0.55 ? '#1a1d23' : '#ffffff';\n      } catch {\n        return '#ffffff';\n      }\n    }\n    slotMs(slot) {\n      const map = {\n        '00:15:00': 900000,\n        '00:30:00': 1800000,\n        '01:00:00': 3600000,\n        '06:00:00': 21600000,\n        '1.00:00:00': 86400000\n      };\n      return map[slot] || 3600000;\n    }\n    startOfDay(d) {\n      const r = new Date(d);\n      r.setHours(0, 0, 0, 0);\n      return r;\n    }\n    endOfDay(d) {\n      const r = new Date(d);\n      r.setHours(23, 59, 59, 999);\n      return r;\n    }\n    startOfWeek(d) {\n      const r = new Date(d);\n      r.setDate(r.getDate() - r.getDay());\n      r.setHours(0, 0, 0, 0);\n      return r;\n    }\n    startOfMonth(d) {\n      return new Date(d.getFullYear(), d.getMonth(), 1);\n    }\n    endOfMonth(d) {\n      return new Date(d.getFullYear(), d.getMonth() + 1, 0, 23, 59, 59, 999);\n    }\n    shortDate(d) {\n      return d.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      });\n    }\n    static {\n      this.ɵfac = function NgxTimelineCalendarService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NgxTimelineCalendarService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: NgxTimelineCalendarService,\n        factory: NgxTimelineCalendarService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return NgxTimelineCalendarService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}